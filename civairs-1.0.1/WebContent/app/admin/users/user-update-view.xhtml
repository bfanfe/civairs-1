<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	template="#{sessionBean.sessionTemplate}">

	<ui:define name="content">
	<h:form id="updateUserForm" >
	
		<div class="Container100 Responsive100 NoIndent">
			<div class="Container100 ui-fluid">
				<div class="Card">
					<p:panelGrid columns="2" style="border:0px; background:none;"
						layout="grid">
						<div align="left">
							<h1 class="CardBigTopic">#{msg.userUpdateDialogTitle}</h1>
						</div>
						<p:outputPanel />
					</p:panelGrid>
					<div class="SeparatorFull"/>
					<p:outputPanel id="updateUserDetails" style="text-align:left;">
						<p:panelGrid columns="1" layout="grid"
							style="background:none; margin-left: 6px !important; margin-right: 12px !important;"
							styleClass="ui-panelgrid-blank">

							<p:panelGrid columns="2" layout="grid"
								style="border:0px !important; background:none; margin-left: 6px !important; margin-right: 12px !important;"
								styleClass="ui-panelgrid-blank">
								<p:panelGrid columns="2" layout="grid"
									style="border:0px !important; background:none;"
									styleClass="ui-panelgrid-blank">

									<p:outputLabel value="#{msg.userLoginLabel}" />

									<p:inputText value="#{userBean.userToUpdate.login}"
										readonly="true" />

									<p:outputLabel value="#{msg.userPasswordResetLabel}" />
									<p:selectBooleanCheckbox value="#{userBean.resetUserPassword}" />

								</p:panelGrid>
								<p:panelGrid columns="2" layout="grid"
									style="border:0px !important; background:none; margin-left: 6px !important; margin-right: 12px !important;"
									styleClass="ui-panelgrid-blank">

									<p:outputLabel value="#{msg.userFirstNameLabel}" />

									<p:inputText value="#{userBean.userToUpdate.firstName}" />

									<p:outputLabel value="#{msg.userLastNameLabel}" />
									<p:inputText value="#{userBean.userToUpdate.lastName}" />
								</p:panelGrid>
								<p:panelGrid columns="2" layout="grid"
									style="border:0px !important; background:none; margin-left: 6px !important; margin-right: 12px !important;"
									styleClass="ui-panelgrid-blank">

									<p:outputLabel value="#{msg.userBirthDateLabel}" />

									<p:calendar value="#{userBean.userToUpdate.birthDate}" />

									<p:outputLabel value="#{msg.userAdressLabel}" />
									<p:inputTextarea value="#{userBean.userToUpdate.adress}" />
								</p:panelGrid>
								<p:panelGrid columns="2" layout="grid"
									style="border:0px !important; background:none; margin-left: 6px !important; margin-right: 12px !important;"
									styleClass="ui-panelgrid-blank">

									<p:outputLabel value="#{msg.userPhoneLabel}" />

									<p:inputMask value="#{userBean.userToUpdate.phoneNumber}"
										mask="(+999) 999-999-99?99" />


									<p:outputLabel value="#{msg.userEmailLabel}" />
									<p:inputText value="#{userBean.userToUpdate.email}" />
								</p:panelGrid>
								<p:panelGrid columns="2" layout="grid"
									style="border:0px !important; background:none; margin-left: 6px !important; margin-right: 12px !important;"
									styleClass="ui-panelgrid-blank">

									<p:outputLabel value="Responsible Entity" />

									<p:selectOneMenu value="#{userBean.userToUpdate.responsibleEntity}"
										var="varenum" converter="responsibleEntityConverter">
										<f:selectItems value="#{userBean.responsibleEntities}" var="enums"
											itemLabel="#{enums.name}" itemValue="#{enums}"  />
										<p:column>#{varenum.name}</p:column>
									</p:selectOneMenu>
								</p:panelGrid>
								<p:panelGrid columns="2" layout="grid"
									style="border:0px !important; background:none; margin-left: 6px !important; margin-right: 12px !important;"
									styleClass="ui-panelgrid-blank"/>
							</p:panelGrid>
							
							<div class="Container100 Responsive100 NoIndent">
								<div class="Container100 ui-fluid">
									<div class="Card">
										<h1 class="CardBigTopic">#{msg.userRolesPicklistTitle}</h1>
										<p:pickList id="userUpdateRolesPickList"
											value="#{userBean.dualListRoles}" var="role"
											itemValue="#{role}" itemLabel="#{role.roleDescription}"
											converter="nGRoleConverter" showSourceControls="false"
											showTargetControls="false" showSourceFilter="false"
											showTargetFilter="false" responsive="true">
											<f:facet name="sourceCaption">#{msg.availableRolesLabel}</f:facet>
											<f:facet name="targetCaption">#{msg.userRolesLabel}</f:facet>
											<p:ajax event="transfer"
												listener="#{userBean.onRoleTransfer}" />
										</p:pickList>
									</div>
								</div>
							</div>
						</p:panelGrid>
					</p:outputPanel>
					<div class="SeparatorFull"/>
					<p:panelGrid columns="1" layout="grid" style="border:0px">
						<div align="right">
							<p:panelGrid columns="2" layout="grid"
								style="border:0px !important; background:none; width:210px; margin-left: 6px !important; margin-right: 12px !important;"
								styleClass="ui-panelgrid-blank">

								<p:commandButton id="updateUserCancel" style="width:100px"
									value="#{msg.buttonCancelLabel}"
									action="#{userBean.cancelUser}" ajax="false" />
								<p:commandButton id="updateUserValidate" style="width:100px" 
									value="#{msg.buttonSaveLabel}" action="#{userBean.updateUser}" ajax="false" />

							</p:panelGrid>
						</div>
					</p:panelGrid>
				</div>
			</div>
		</div>

	</h:form>
	</ui:define>
</ui:composition>